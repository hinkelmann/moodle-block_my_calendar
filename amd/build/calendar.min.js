define(["jquery","core/config","block_my_calendar/bootstrap.datepicker"],function(a,b){return{init:function(c){function d(a){for(var b in calendario)if(calendario.hasOwnProperty(b)&&a.getMonth()==calendario[b].data.getMonth()&&a.getDate()==calendario[b].data.getDate())return{tooltip:calendario[b].titulo,classes:"today"}}function e(b){var d="";c.dt1=parseInt(b.date.getTime()/1e3),c.dt2=parseInt(b.date.getTime()/1e3),a.post(h,c).done(function(b){for(var c in b)b.hasOwnProperty(c)&&(data=new Date(1e3*b[c].timestart),d+="<a href='"+b[c].url+"' class='cal-box'><div class='cal-h cal-h-a'>"+g(data.getHours(),2)+"h"+g(data.getMinutes(),2)+"</div><div class='cal-h cal-h-b'>"+b[c].name+"</div></a>");""==d&&(d="<a class='center'>Nenhum evento registrado</a>"),a(".event-render").fadeOut("fast").fadeIn("slow").html(d)})}function f(b){calendario=[];var d=new Date,e=new Date(b.getFullYear(),b.getMonth(),1),f=new Date(b.getFullYear(),b.getMonth()+1,0);c.dt1=e.getTime()/1e3,c.dt2=f.getTime()/1e3,a.post(h,c).done(function(c){for(var e in c)c.hasOwnProperty(e)&&(data=new Date(1e3*c[e].timestart),calendario.push({data:data,titulo:c[e].name}));a("#block_my_calendar").datepicker("update",new Date(b.getFullYear(),b.getMonth(),d.getDate()))})}function g(a,b){for(var c=b-String(a).length,d=0;c>d;d++)a="0"+a;return a}a.fn.datepicker.defaults.templates={leftArrow:'<span class="pull-right fa fa-chevron-left"></span>',rightArrow:'<span class="pull-left fa fa-chevron-right"></span>'},a.fn.datepicker.dates["pt-BR"]={days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],daysMin:["D","S","T","Q","Q","S","S"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"};var h=b.wwwroot+"/blocks/my_calendar/calendar.ajax.php?sesskey="+b.sesskey;f(new Date),e({date:new Date}),a("#block_my_calendar").datepicker({language:"pt-BR",beforeShowDay:d}).on("changeDate",function(a){e(a)}).on("changeMonth",function(a){f(a.date)}),a(".datepicker.datepicker-inline").addClass("center-block")}}});